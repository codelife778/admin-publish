(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67c3370a"],{"0346":function(e,t,s){"use strict";s.r(t);var l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",[s("div",{attrs:{slot:"header"},slot:"header"},[s("el-button",{attrs:{type:"primary"},on:{click:e.toAdd}},[e._v("新增")])],1),s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleList,border:""}},[s("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),s("el-table-column",{attrs:{align:"center",prop:"roleName",label:"角色编码",width:"200"}}),s("el-table-column",{attrs:{align:"center",label:"角色编码",prop:"roleCode",width:"200"}}),s("el-table-column",{attrs:{align:"center",label:"备注",prop:"remark"}}),s("el-table-column",{attrs:{align:"center",label:"添加时间",prop:"createTime",width:"200"}}),s("el-table-column",{attrs:{align:"center",label:"操作",prop:"nickName",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(s){return e.goEdit(t.row.id)}}},[e._v("编辑")]),s("el-button",{attrs:{type:"error",size:"mini"},on:{click:function(s){return e.goDel(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),s("el-pagination",{staticStyle:{"margin-top":"30px","text-align":"right"},attrs:{"current-page":e.page.currentPage,"page-sizes":e.page.pageSizes,"page-size":e.page.size,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),s("popup",{ref:"popup",attrs:{"menu-list":e.menuList}})],1)},n=[],r=s("04da"),a=s("1b62"),i=s("a6c9"),o={name:"",components:{popup:i["default"]},mixins:[a["a"]],data:function(){return{roleList:[],menuList:[]}},created:function(){this.getRoleList(),this.getfindAllPermissions()},methods:{getfindAllPermissions:function(){var e=this;r["a"].findAllPermissions().then((function(t){console.log("res: ",t),t.success?e.menuList=t.data.menus:e.$message.error("请求失败")})).catch((function(e){}))},toAdd:function(){this.$refs.popup.openPopup()},goEdit:function(e){this.$refs.popup.openPopup(e)},sizeChange:function(){},currentChange:function(){},goDel:function(e){var t=this;this.$confirm("确认删除角色11?").then((function(s){r["a"].removeRole(e).then((function(e){e.success?(t.$message.success("删除成功!"),t.getRoleList()):t.$message.error("删除失败")}))}))},getRoleList:function(){var e=this;r["a"].findUsersByfindAllRolesPage(this.page.currentPage,this.page.limit).then((function(t){t.success?(e.roleList=t.data.items,e.page.total=t.data.total):e.$message.error(t.message)}))}}},c=o,u=s("0b56"),d=Object(u["a"])(c,l,n,!1,null,"018df822",null);t["default"]=d.exports},"04da":function(e,t,s){"use strict";var l=s("b775");function n(){return Object(l["a"])({url:"/admin/sysAuth/role/findAllRoles"})}function r(e){return Object(l["a"])({url:"/admin/sysAuth/role/removeRole/".concat(e),method:"delete"})}function a(e){return Object(l["a"])({url:"/admin/sysAuth/user/saveUserRoles",method:"post",data:e})}function i(e){return Object(l["a"])({url:"/admin/sysAuth/role/updateRolePermissions",method:"put",data:e})}function o(e){return Object(l["a"])({url:"/admin/sysAuth/role/findRolePermissions/".concat(e)})}function c(){return Object(l["a"])({url:"/admin/sysAuth/permission/findAllPermissions"})}t["a"]={findUsersByfindAllRolesPage:n,removeUser:r,saveUserRoles:a,updateUserRoles:i,findRolePermissions:o,findAllPermissions:c}},"1b62":function(e,t,s){"use strict";var l=s("5f87");t["a"]={data:function(){return{page:{currentPage:1,size:10,total:0,pageSizes:[5,10,30,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"loading.....",spinner:"el-icon-loading"},uploadUrl:"http://localhost/lejuAdmin/material/uploadFileOss"}},computed:{headers:function(){var e=Object(l["a"])(),t={token:e};return t}}}},a6c9:function(e,t,s){"use strict";s.r(t);var l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"编辑角色",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",inline:!1,size:"normal"}},[s("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[s("el-input",{attrs:{size:"small"},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),s("el-form-item",{attrs:{label:"角色编码",prop:"roleCode"}},[s("el-input",{attrs:{size:"small"},model:{value:e.form.roleCode,callback:function(t){e.$set(e.form,"roleCode",t)},expression:"form.roleCode"}})],1),s("el-form-item",{attrs:{label:"角色描述",prop:"remark"}},[s("el-input",{attrs:{type:"textarea",size:"small"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),s("el-form-item",{attrs:{label:"选择菜单"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6,offset:0}},[s("el-checkbox",{attrs:{indeterminate:!1},on:{change:e.handelExpand},model:{value:e.isExpand,callback:function(t){e.isExpand=t},expression:"isExpand"}},[e._v("展开/关闭")])],1),s("el-col",{attrs:{span:6,offset:0}},[s("el-checkbox",{attrs:{indeterminate:!1},on:{change:e.handleSelectAll},model:{value:e.isSelectAll,callback:function(t){e.isSelectAll=t},expression:"isSelectAll"}},[e._v("全选/取消权限")])],1)],1),s("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoad,expression:"treeLoad"}],ref:"tree",attrs:{"node-key":"id","show-checkbox":"",data:e.menuList,props:e.defaultProps}})],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1)],1)},n=[],r=s("04da"),a={name:"",props:{menuList:{type:Array,require:!0,default:function(){return[]}}},data:function(){return{treeLoad:!1,dialogVisible:!1,form:{},isExpand:!1,isSelectAll:!1,defaultProps:{label:"title",children:"children"},selectKeys:[]}},methods:{handleClose:function(){this.dialogVisible=!1,this.$refs.form.resetFields(),this.$refs.tree.setCheckedKeys([])},openPopup:function(e){var t=this;this.dialogVisible=!0,e&&r["a"].findRolePermissions(e).then((function(e){e.success?(t.treeLoad=!0,e.data.role.permissionIds&&(t.$refs.tree.setCheckedKeys(e.data.role.permissionIds),delete e.data.role.permissionIds),t.form=e.data.role):t.$message.error("查询失败!"),t.treeLoad=!1}))},handelExpand:function(e){this.setAllExpand(e)},setAllExpand:function(e){var t=this.$refs.tree.store.nodesMap;for(var s in t)t[s].expanded=e},handleSelectAll:function(e){e?(this.seltAllSelect(this.menuList),this.$refs.tree.setCheckedKeys(this.selectKeys)):this.$refs.tree.setCheckedKeys([])},seltAllSelect:function(e){for(var t=0;t<e.length;t++){var s=e[t];this.selectKeys.push(s.id),s.children&&s.children.length>0&&this.seltAllSelect(s.children)}}}},i=a,o=s("0b56"),c=Object(o["a"])(i,l,n,!1,null,"449257ca",null);t["default"]=c.exports}}]);